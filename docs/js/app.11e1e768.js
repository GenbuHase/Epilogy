(function(e){function t(t){for(var i,o,s=t[0],u=t[1],l=t[2],d=0,f=[];d<s.length;d++)o=s[d],a[o]&&f.push(a[o][0]),a[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);c&&c(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1162:function(e,t,n){var i={"./story1.default.json":"90c2","./story2.default.json":"dc64"};function a(e){var t=r(e);return n(t)}function r(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="1162"},1834:function(e,t,n){},"1f59":function(e,t,n){"use strict";var i=n("418e"),a=n.n(i);a.a},"1f8b":function(e,t,n){e.exports=n.p+"img/dialog-background.c5ce8d6f.png"},"21eb":function(e,t,n){e.exports=n.p+"media/read.4b114e55.mp3"},"21f8":function(e,t,n){var i={"./story1.default.json":"90c2","./story2.default.json":"dc64"};function a(e){var t=r(e);return n(t)}function r(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="21f8"},2382:function(e,t,n){},"418e":function(e,t,n){},"4d42":function(e,t,n){"use strict";var i=n("d9da"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Epilogy",{style:{width:e.screenSize+"px",height:e.screenSize+"px"}},[i("BackScreen",e._b({ref:"backScreen",attrs:{dialogue:e.dialogue,src:n("1f8b")}},"BackScreen",e.status,!1,!0)),i("Msgbox",e._b({attrs:{dialogue:e.dialogue},on:{"seplayer:play":e.handleSePlay,"bgmplayer:play":e.handleBgmPlay,"fade-in:start":e.handleFadeIn,"fade-out:start":e.handleFadeOut}},"Msgbox",e.status,!1,!0)),i("Menu",{attrs:{title:"Main Menu"}})],1)},r=[],o=n("5d73"),s=n.n(o),u=n("f499"),l=n.n(u),c=n("308d"),d=n("6bb5"),f=n("4e2b"),h=n("f28b"),p=n("7618"),v=(n("6762"),n("2fdb"),n("a745")),g=n.n(v),y=n("d225"),m=n("b0b4"),b=n("a4bb"),w=n.n(b),O=(n("7514"),n("6b54"),function(){function e(){Object(y["a"])(this,e)}return Object(m["a"])(e,null,[{key:"getClassName",value:function(e){return Object.prototype.toString.call(e).slice(8,-1)}},{key:"isObject",value:function(e){return e instanceof Object&&!g()(e)}},{key:"includeKeys",value:function(e,t){return!!w()(e).find(function(e){return t.includes(e)})}}]),e}()),k=function(){function e(t){return Object(y["a"])(this,e),e.compile(t)}return Object(m["a"])(e,null,[{key:"compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[];switch(e.type){case"message":if(t)break;if(g()(e.value)){var i=!0,a=!1,r=void 0;try{for(var o,u=s()(e.value);!(i=(o=u.next()).done);i=!0){var l=o.value;n.push(this.compile(l,!0))}}catch(E){a=!0,r=E}finally{try{i||null==u.return||u.return()}finally{if(a)throw r}}break}return{type:e.type,value:e.value||"",label:e.label||{},readSpeed:e.readSpeed||null};case"prompt":if(t||!g()(e.value))break;for(var c=0;c<e.value.length;c++){var d=e.value[c],f="",h={};if(["string","number"].includes(Object(p["a"])(d))&&(f=d),g()(d)){if(!d.length){e.value.splice(c,1),--c;continue}["string","number"].includes(Object(p["a"])(d[0]))&&(f=d[0]),O.isObject(d[1])&&(h=d[1])}O.isObject(d)&&(d.message&&(f=d.message),d.label&&(h=d.label)),e.value[c]={message:f,label:h}}return e;case"fade-in":if(O.isObject(e.value)){if(!e.value.duration)break;return{type:e.type,value:{to:e.value.to||"#000000",duration:e.value.duration},label:e.label||{}}}if("number"===typeof e.value)return{type:e.type,value:{to:"#000000",duration:e.value},label:e.label||{}};break;case"fade-out":if("number"===typeof e.value)return{type:e.type,value:e.value};break}if(["string","number"].includes(Object(p["a"])(e)))return t?e:{type:"message",value:e,label:{}};if(g()(e)){var v=!0,y=!1,m=void 0;try{for(var b,w=s()(e);!(v=(b=w.next()).done);v=!0){var k=b.value;n.push(this.compile(k,!0))}}catch(E){y=!0,m=E}finally{try{v||null==w.return||w.return()}finally{if(y)throw m}}}if(!n.length)throw new j;return{type:"message",value:n||"",label:e.label||{},readSpeed:e.readSpeed||null}}}]),e}(),j=function(e){function t(){return Object(y["a"])(this,t),Object(c["a"])(this,Object(d["a"])(t).call(this,"The format of provided object doesn't match that of Dialogue"))}return Object(f["a"])(t,e),Object(m["a"])(t,[{key:"name",get:function(){return"DialogueCompileError"}}]),t}(Object(h["a"])(TypeError)),E=n("795b"),S=n.n(E),_=function(e){function t(){var e;return Object(y["a"])(this,t),e=Object(c["a"])(this,Object(d["a"])(t).call(this)),e.audios={},e}return Object(f["a"])(t,e),Object(m["a"])(t,[{key:"load",value:function(e){var t=this;return new S.a(function(n,i){t.audios[e]&&n(t.audios[e]);var a=new Audio(e);a.addEventListener("loadstart",function(){t.audios[e]=a,n(a)}),a.addEventListener("error",function(e){return i(e)})})}},{key:"play",value:function(e){this.load(e).then(function(e){return e.play()})}}]),t}(Object(h["a"])(AudioContext)),x=function(e){function t(){return Object(y["a"])(this,t),Object(c["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(f["a"])(t,e),t}(Object(h["a"])(AudioContext)),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epilogy-BackScreen",{style:{backgroundImage:"url("+e.attrs.src+")"}},[n("Style",{ref:"styleDom"})],1)},$=[],I=(n("c5f6"),n("e814")),L=n.n(I),P=(n("28a5"),n("2d1f")),D=n.n(P),N=function(){function e(){Object(y["a"])(this,e)}return Object(m["a"])(e,null,[{key:"multipleUpdate",value:function(e){for(var t=D()(e),n=0;n<t.length;n++){var i=t[n];this.$emit("update:".concat(i[0]),i[1])}}},{key:"hexToColor",value:function(e){var t=e.slice(1).split(/.{2}/),n=[],i=!0,a=!1,r=void 0;try{for(var o,u=s()(t);!(i=(o=u.next()).done);i=!0){var l=o.value;n.push(L()(l,16))}}catch(c){a=!0,r=c}finally{try{i||null==u.return||u.return()}finally{if(a)throw r}}return n}}]),e}(),C={data:function(){return{attrs:{src:this.src}}},props:{chapter:{type:Number},section:{type:Number},dialogueId:{type:Number},dialogue:{type:Object},src:{type:String}},methods:{changeImage:function(e){this.src=e},startFadeIn:function(){var e=this.$refs.styleDom,t=this.dialogue.value,n=t.duration,i=t.to;this.$el.addEventListener("transitionend",this.endFadeIn),this.$el.style.transitionDuration="".concat(n,"ms"),e.innerHTML="epilogy-backscreen.fade-in { background-color: ".concat(i," }"),this.$el.classList.add("fade-in")},endFadeIn:function(){this.$el.removeEventListener("transitionend",this.endFadeIn),this.$el.style.transitionDuration="";var e=this.dialogue;return O.includeKeys(e.label,["chapter","section","dialogue"])?N.multipleUpdate.call(this,{chapter:e.label.chapter||this.chapter,section:e.label.section||this.section,dialogueId:e.label.dialogue||1}):this.$emit("update:dialogueId",this.dialogueId+1)},startFadeOut:function(){var e=this.dialogue.value;this.$el.addEventListener("transitionend",this.endFadeOut),this.$el.style.transitionDuration="".concat(e,"ms"),this.$el.classList.remove("fade-in")},endFadeOut:function(){this.$el.removeEventListener("transitionend",this.endFadeOut);var e=this.$refs.styleDom;e.innerHTML="",this.$emit("update:dialogueId",this.dialogueId+1)}}},F=C,T=(n("6608"),n("2877")),R=Object(T["a"])(F,M,$,!1,null,"19e2d126",null);R.options.__file="BackScreen.vue";var Q=R.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epilogy-Menu",{attrs:{open:e.attrs.open&&""}},[n("Epilogy-Menutitle",[e._v(e._s(e.attrs.title))]),n("Epilogy-Menulist",e._l(e.items,function(t){return n("Epilogy-Menuitem",{key:t},[e._v(e._s(t))])}),1)],1)},B=[],U={props:{title:{type:String,required:!1},open:{type:Boolean,required:!1}},data:function(){return{attrs:{title:this.title,open:this.open},items:[]}},methods:{switch:function(){this.attrs.open=!this.attrs.open}},created:function(){var e=this;window.addEventListener("keydown",function(t){32===t.keyCode&&e.switch()}),window.addEventListener("keydown",function(e){switch(e.keyCode){case 38:break;case 40:break}})}},K=U,A=(n("9786"),Object(T["a"])(K,z,B,!1,null,"b37e3964",null));A.options.__file="Menu.vue";var H=A.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epilogy-Msgbox",{attrs:{open:e.open&&""}},[n("SimpleMessage",{ref:"simpleMsg"}),n("PromptMessage",{ref:"promptMsg"})],1)},q=[],W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epilogy-SimpleMessage",e._l(e.message,function(t,i){return n("Span",{key:i},[e._v(e._s(t))])}),1)},V=[],G=(n("20d6"),{data:function(){return{message:"",readSpeed:null,hasRead:!0,readQues:[]}},watch:{readQues:{handler:function(e,t){this.hasRead=-1===this.readQues.findIndex(function(e){return null!=e})},immediate:!0}},methods:{startReading:function(){var e=this,t=this.$el.children,n=!0,i=!1,a=void 0;try{for(var r,o=s()(t);!(n=(r=o.next()).done);n=!0){var u=r.value;u.removeAttribute("read")}}catch(d){i=!0,a=d}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}for(var l=function(n){e.$set(e.readQues,n,setTimeout(function(){e.$set(e.readQues,n,null),t[n].setAttribute("read",""),t[n].scrollIntoView({behavior:"instant",block:"end"})},50*n))},c=0;c<t.length;c++)l(c)},stopReading:function(){while(this.readQues.length)this.readQues[0]&&clearTimeout(this.readQues[0]),this.$delete(this.readQues,0)},skipReading:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=s()(this.$el.children);!(e=(i=a.next()).done);e=!0){var r=i.value;r.setAttribute("read","")}}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.stopReading()}},updated:function(){var e=this;this.stopReading(),this.$nextTick().then(function(){e.startReading()})}}),X=G,Y=(n("1f59"),Object(T["a"])(X,W,V,!1,null,"5c6786e0",null));Y.options.__file="SimpleMessage.vue";var Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Epilogy-PromptMessage",e._l(e.items,function(t,i){return n("Li",{key:i,attrs:{tabIndex:i+1}},[n("Span",[e._v(e._s(t.message))])],1)}),1)},te=[],ne={data:function(){return{items:[]}},methods:{initSelection:function(){document.activeElement.matches("Epilogy-PromptMessage > Li")||this.$el.firstElementChild&&this.$el.firstElementChild.focus()},prev:function(){document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus()},next:function(){document.activeElement.nextElementSibling&&document.activeElement.nextElementSibling.focus()},handlekeyup:function(e){this.initSelection(),38===e.keyCode&&this.prev(),40===e.keyCode&&this.next()}},created:function(){window.addEventListener("keyup",this.handlekeyup)},beforeDestroy:function(){window.removeEventListener("keyup",this.handlekeyup)}},ie=ne,ae=(n("e79d"),Object(T["a"])(ie,ee,te,!1,null,"a7f45f0a",null));ae.options.__file="PromptMessage.vue";var re=ae.exports,oe={components:{SimpleMessage:Z,PromptMessage:re},props:{chapter:{type:Number},section:{type:Number},dialogueId:{type:Number},dialogue:{type:Object}},computed:{open:function(){return null!=this.dialogue}},methods:{clear:function(){var e=this.$refs,t=e.simpleMsg,n=e.promptMsg;this.$el.scrollTo(0,0),t.message="",t.readSpeed=null,n.items=[]},render:function(e){var t=this.$refs,i=t.simpleMsg,a=t.promptMsg;if(!e)return this.clear();switch(e.type){default:if(this.clear(),this.$emit("seplayer:play",n("21eb")),"message"===e.type){if(i.readSpeed=e.readSpeed,"string"===typeof e.value)return i.message=e.value;if(g()(e.value))return i.message=e.value.join("\n")}if("prompt"===e.type)return a.items=e.value;break;case"fade-in":return this.$emit("fade-in:start");case"fade-out":return this.$emit("fade-out:start")}},prev:function(){this.$emit("update:dialogueId",this.dialogueId-1)},next:function(){var e=this.$refs.simpleMsg;if(this.dialogue){if("message"===this.dialogue.type)return e.hasRead?O.includeKeys(this.dialogue.label,["chapter","section","dialogue"])?N.multipleUpdate.call(this,{chapter:this.dialogue.label.chapter||this.chapter,section:this.dialogue.label.section||this.section,dialogueId:this.dialogue.label.dialogue||1}):this.$emit("update:dialogueId",this.dialogueId+1):e.skipReading();if("prompt"===this.dialogue.type){if(!document.activeElement.matches("Epilogy-PromptMessage > Li"))return;var t=this.dialogue.value[document.activeElement.tabIndex-1];return O.includeKeys(t.label,["chapter","section","dialogue"])?N.multipleUpdate.call(this,{chapter:t.label.chapter||this.chapter,section:t.label.section||this.section,dialogueId:t.label.dialogue||1}):this.$emit("update:dialogueId",this.dialogueId+1)}}},handleKeyup:function(e){88===e.keyCode&&this.prev(),90===e.keyCode&&this.next()}},created:function(){window.addEventListener("keyup",this.handleKeyup)},mounted:function(){this.render(this.dialogue)},beforeDestroy:function(){window.removeEventListener("keyup",this.handleKeyup)},updated:function(){this.render(this.dialogue)}},se=oe,ue=(n("9ee4"),Object(T["a"])(se,J,q,!1,null,"1752fa67",null));ue.options.__file="Msgbox.vue";var le=ue.exports,ce={components:{BackScreen:Q,Menu:H,Msgbox:le},data:function(){return{status:{heroName:"",heroineName:"",storyMode:1,chapter:null,section:null,dialogueId:null},system:{width:window.innerWidth,height:window.innerHeight,sePlayer:new _,bgmPlayer:new x},config:{locale:"default",readSpeed:50}}},computed:{screenSize:function(){return Math.min(this.system.width,this.system.height)},stories:function(){try{return n("1162")("./story".concat(this.status.storyMode,".").concat(this.config.locale,".json"))}catch(e){return n("21f8")("./story".concat(this.status.storyMode,".default.json"))}},dialogues:function(){var e=this.status,t=e.chapter,n=e.section;return this.loadDialogues(t,n)},dialogue:function(){var e=this.dialogues;return e&&e[this.status.dialogueId-1]||null}},watch:{config:{handler:function(e,t){window.localStorage.setItem("epilogy-config",l()(e))},deep:!0}},methods:{loadConfig:function(){window.localStorage.getItem("epilogy-config")||window.localStorage.setItem("epilogy-config",l()(this.config));try{this.config=JSON.parse(window.localStorage.getItem("epilogy-config"))}catch(e){}},loadDialogues:function(e,t){var n=this.stories["".concat(e).concat(t?" ".concat(t):"")]||[];return this.compileDialogues(n)},compileDialogues:function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var r,o=s()(e);!(n=(r=o.next()).done);n=!0){var u=r.value;t.push(k.compile(u))}}catch(l){i=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return t},handleSePlay:function(e){this.system.sePlayer.play(e)},handleBgmPlay:function(e){this.system.bgmPlayer.play(e)},handleFadeIn:function(){this.$refs.backScreen.startFadeIn()},handleFadeOut:function(){this.$refs.backScreen.startFadeOut()},handleResize:function(){this.system.width=window.innerWidth,this.system.height=window.innerHeight}},created:function(){window.addEventListener("resize",this.handleResize),this.loadConfig(),this.status.chapter=1,this.status.section=1,this.status.dialogueId=1},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}},de=ce,fe=(n("8c32"),n("4d42"),Object(T["a"])(de,a,r,!1,null,"444a44bc",null));fe.options.__file="Epilogy.vue";var he=fe.exports;i["a"].config.productionTip=!1,new i["a"]({el:"Epilogy",render:function(e){return e(he)}})},6608:function(e,t,n){"use strict";var i=n("fb9a"),a=n.n(i);a.a},"7f90":function(e,t,n){},"8c32":function(e,t,n){"use strict";var i=n("c760"),a=n.n(i);a.a},"90c2":function(e){e.exports={"1 1":["―― 西暦二〇一八年　某日",["荒木先生","「えー、先日みなさんにお知らせしたとおり、今日のホームルームでは、修学旅行の班決めと係決めを行いたいと思います」"],["荒木先生","「班は普段の座席通り、1班4人になるように分けましたので、指示に従って移動してください」"],["荒木先生","「では、みなさん移動してください」"],{type:"fade-in",value:3e3,label:{section:2}}],"1 2":[{type:"fade-out",value:1e3},["僕は、今までこの平凡な学校で、何ら変わらない毎日を過ごしていた。","いつもと同じ場所、いつもと同じ時間、いつもと同じ人。","「同じ」を繰り返すそんな日々が、もう2年を超えていたことに、この時初めて気が付いた。"],["ほぼ無作為に集められた4人。","場の空気が纏められるまで、そう長くは掛からなかった。"],["明るい男子","「えーっと、リーダー誰にしようか。ってかさ、まずは自己紹介しない？」"],["明るい女子","「いいね、それ！まだ話したことない人も居ることだし」"],"その刹那、僕は微かに視線を観測した気がした。","僕はただ、場に取り残された者として、頷くことしかできなかった。",["明るい男子","「じゃあ僕から始めるね〜。僕は 冴羽 駿 って言います。好きなことは、チャートを解く事とかかな〜。よろしくお願いします」"],["冴羽は自己紹介から察するに、非常に陽気な性格でみんなから慕われている。","クラスの人気者であることから、普段から滅多に接する機会はない。"],["明るい女子","「わたしは {{ heroineName }} って言います。えーっと……よろしくね」"],["{{ heroineName.last }}は、クラスでそこまで目立っている、とまでは言い難い存在だ。","しかしながら、それでもかなり明るい人格で、普段から色んな人と喋っているようだ。"],["メガネを掛けた男子","「山口 修二 です。好きなものはアニメです。まぁよろしくです」"],["修二は、僕と唯一と言ってもいいであろう親友だ。","去年から同じクラスで、事ある度に一緒に行動してきた仲である。"],["基本的には無口で、人と喋ることが少し苦手みたいだ。","纏めれば、少し内気で暗いタイプで、人付き合いが苦手なタイプの人間だ。"],["{{ heroName }}","「{{ heroName }} です。まぁ好きなことは小説書いたり、読んだりすることかなぁ。まぁ、どうぞよろしく」"],["そうそう、僕の自己紹介が忘れていたね。","{{ heroName }}。年齢は16歳。","ずっと内気で、あんまり人と関わっていない過去を過ごして来ている。"]]}},9786:function(e,t,n){"use strict";var i=n("2382"),a=n.n(i);a.a},"9ee4":function(e,t,n){"use strict";var i=n("7f90"),a=n.n(i);a.a},c760:function(e,t,n){},d9da:function(e,t,n){},dc64:function(e){e.exports={1:[]}},e79d:function(e,t,n){"use strict";var i=n("1834"),a=n.n(i);a.a},fb9a:function(e,t,n){}});
//# sourceMappingURL=app.11e1e768.js.map